<html>
	<head>
		<meta charset = "UTF-8">
	  <link rel="stylesheet" href= "stylesheets/registro.css"/>
	  <link rel="stylesheet" href="stylesheets/foundation/css/foundation.css"/>
	  <link rel="stylesheet" href="stylesheets/font-awesome-4.3.0/css/font-awesome.css"/>
	  <link rel="stylesheet" href="stylesheets/font-awesome-4.3.0/css/font-awesome.min.css"/>
	  <script src="stylesheets/foundation/js/vendor/modernizr.js"></script>
	  <script src="http://maps.googleapis.com/maps/api/js"></script>
		<script src="javascripts/socket.io.js"></script>
		<script>
		var points;
		var socket = io.connect('http://localhost:3000/');
  socket.on('news', function (data) {
    points=data;
		console.log(data);
    socket.emit('my other event', { my: 'data' });
  });
	console.log(points);

	  function initialize() {
	    var mapOptions = {
	      zoom: 15
	    };
	    var map=new google.maps.Map(document.getElementById("googleMap"),mapOptions);

	    if(navigator.geolocation) {
	      navigator.geolocation.getCurrentPosition(function(position) {
	        var pos = new google.maps.LatLng(position.coords.latitude,
	                                         position.coords.longitude);


	        var markerClient = new google.maps.Marker({
	             icon:'http://maps.google.com/mapfiles/ms/icons/blue-dot.png',
	             position: pos,
	             map: map,
	             draggable:true,
	             animation: google.maps.Animation.DROP
	            /* title:"Hello World!" */});

							var markerRent = new google.maps.Marker({
		             icon:'http://maps.google.com/mapfiles/ms/icons/green-dot.png',
		             position: new google.maps.LatLng(19.433878043215408, -99.2056404253006),
		             map: map,
		             draggable:true,
		             animation: google.maps.Animation.DROP
		            /* title:"Hello World!" */});

								var markerRent1 = new google.maps.Marker({
			             icon:'http://maps.google.com/mapfiles/ms/icons/green-dot.png',
			            position:new google.maps.LatLng(19.430170975081705, -99.1980612026245),
			             map: map,
			             draggable:true,
			             animation: google.maps.Animation.DROP
			            /* title:"Hello World!" */});


									var markerRent2 = new google.maps.Marker({
				             icon:'http://maps.google.com/mapfiles/ms/icons/green-dot.png',
				             position:new google.maps.LatLng(19.430346972082653, -99.2025397560974),
				             map: map,
				             draggable:true,
				             animation: google.maps.Animation.DROP
				            /* title:"Hello World!" */});
										var infowindow = new google.maps.InfoWindow;
						             google.maps.event.addListener(markerClient, 'mouseover', function() {
						             infowindow.setContent("<p>Esta es tu casa</p>");
						              infowindow.open(map, markerClient);
						                                     });
										var infowindow1 = new google.maps.InfoWindow;
												google.maps.event.addListener(markerRent1, 'mouseover', function() {
												infowindow.setContent("<p>Este es un lugar donde puedes estacionarte</p>");
												infowindow.open(map, markerRent1);
																										});

	    map.setCenter(pos);},
	    function() {
	    handleNoGeolocation(true);
	    });
	    } else {
	    //Browser doesn't support Geolocation
	   handleNoGeolocation(false);
	  }
	}
	function toggleBounce() {
	   infowindow.open(map, marker);
	  /* if (marker.getAnimation() != null) {
	 /      /marker.setAnimation(null);
	        marker.setTitle="Hola";
	   } else {
	    // marker.setAnimation(google.maps.Animation.BOUNCE);
	    } */
	    }
	function handleNoGeolocation(errorFlag) {
	  if (errorFlag) {
	   var content = 'Error: The Geolocation service failed.';
	  } else {
	    var content = 'Error: Your browser doesn\'t support geolocation.';
	  }

	  var options = {
	       map: map,
	       position: new google.maps.LatLng(60, 105),
	      content: content
	 };
	  var infowindow = new google.maps.InfoWindow(options);
	       map.setCenter(options.position);
	       }
	google.maps.event.addDomListener(window, 'load', initialize);
	  </script>
	 <title>Raedam-Busqueda de espacios</title>
	</head>
	<body>
    <div class="large-12 columns">
      <header>
    <div class="wrapper">
      <a href="#"><img src="../images/raedam-logo_360.png" width="12%" height="12%"/></a>

      <span id="usernav">
      <a href="#">Logout</a>
      <a href="#">Mi Perfil<span><img src="../images/raedam-logo_360.png" width="10%" height="10%" /></span></a></span>
    </div>
    </div>
  </header>
<div id="BarraBusqueda">
  	<div class="large-12 columns">
    	<input type="text" placeholder="Calle">
        <br>
    </div>
</div>
<!--Aqui va el mapa-->
<div class="map">
  <div class= "large-12 columns">
    <h2>Ponga en el mapa la ubicaci√≥n</h2>
    <div class = "large-12 columns">
      <div id="googleMap"></div>
    </div>
  </div>
</div>

	</body>
</html>
